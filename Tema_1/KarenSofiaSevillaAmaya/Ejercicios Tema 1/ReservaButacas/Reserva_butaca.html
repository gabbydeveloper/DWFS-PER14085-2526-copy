<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style2.css">
    <!-- Incluye Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
     
    <title>Tema 1. Reserva Butacas</title>
</head>
<body>
    <header class = "Pantalla"> <h1>Pantalla</h1> </header>    
    <div class="container mt-1">
      <div class = "row fila" data-fila="1"> <h2>Fila 1</h2>
            <div class = "col"> 1-1</div><div class = "col"> 1-2</div><div class = "col"> 1-3</div>
            <div class = "col"> 1-4</div><div class = "col"> 1-5</div><div class = "col"> 1-6</div>
            <div class = "col"> 1-7</div><div class = "col"> 1-8</div><div class = "col"> 1-9</div>           
            <div class = "col"> 1-10</div><div class = "col"> 1-11</div><div class = "col"> 1-12</div>           
      </div>      

      <div class = "row fila" data-fila="2"> <h2>Fila 2</h2>
            <div class = "col"> 2-1</div><div class = "col"> 2-2</div><div class = "col"> 2-3</div>
            <div class = "col"> 2-4</div><div class = "col"> 2-5</div><div class = "col"> 2-6</div>
            <div class = "col"> 2-7</div><div class = "col"> 2-8</div><div class = "col"> 2-9</div>           
            <div class = "col"> 2-10</div><div class = "col"> 2-11</div><div class = "col"> 2-12</div>
      </div>      

      <div class = "row fila" data-fila="3"> <h2>Fila 3</h2>
            <div class = "col"> 3-1</div><div class = "col"> 3-2</div><div class = "col"> 3-3</div>
            <div class = "col"> 3-4</div><div class = "col"> 3-5</div><div class = "col"> 3-6</div>
            <div class = "col"> 3-7</div><div class = "col"> 3-8</div><div class = "col"> 3-9</div>
            <div class = "col"> 3-10</div><div class = "col"> 3-11</div><div class = "col"> 3-12</div>
      </div>      
    </div>

   
  <form id="SeleccionButacas" class="p-3">
    <div class="form-container w-25 text-start ms-0">
      <label for="cantidad">Ingresa la cantidad de butacas:</label>
      <input type="number" class="form-control mb-2" id="cantidad" placeholder="Ejemplo: 2" min = "1" max="12" required>
      <label for="fila">Selecciona la fila:</label>
      <select class="form-select mb-2" id="fila" required>
        <option value="" disabled selected>Elige una fila</option>
        <option value="1">Fila 1</option>
        <option value="2">Fila 2</option>
        <option value="3">Fila 3</option>
      </select>

    </div>
    <button type="submit" class="btn btn-primary mt-2">Reservar</button>
  </form>
</div>
 
    <footer class="Pie">
       <p>CINEMA-UNIR</p> 
       <p>Dirección:  Calle Avenida de la Paz, 137. Logroño</p>
       <p>Teléfono:  941209743</p>
       <p>Email:  cinefullstack@unircinema.com</p>
    </footer>


 <script>
    const form = document.getElementById('SeleccionButacas');

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const cantidad = Number.parseInt(document.getElementById('cantidad').value);
      const filaSeleccionada = document.getElementById('fila').value;

      if (Number.isNaN(cantidad) || cantidad < 1 || !filaSeleccionada) {
        alert("Por favor, ingresa una cantidad válida y selecciona una fila.");
        return;
      }

      // Seleccionar solo las butacas de la fila elegida
      const fila = document.querySelector(`.fila[data-fila="${filaSeleccionada}"]`);
      const butacas = fila.querySelectorAll('.col');

      let ocupadas = 0;

      
     // Buscar butacas libres y ocuparlas
      for (let i = 0; i < butacas.length && ocupadas < cantidad; i++) {
        if (!butacas[i].classList.contains('ocupada')) {
          butacas[i].classList.add('ocupada');
          ocupadas++;
        }
      }

      if (ocupadas < cantidad) {
        alert(`Solo había ${ocupadas} butacas libres en la fila ${filaSeleccionada}.`);
      }
      
    });
  </script>

  </body>
</html>
